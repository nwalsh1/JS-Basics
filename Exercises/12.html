<!DOCTYPE html>
<html>
  <head>
    <title>Exercise 12 - Advanced Functions</title>
  </head>
  <body>
    <p>12c:</p>
    <button class="js-start-button">Start</button>
    <p>12d:</p>
    <button class="js-loading-button">Start</button>
    <p>12e:</p>
    <button class="js-add-button">Add to cart</button>
    <p class="js-added"></p>
    <p>12f:</p>
    <button class="js-add-button-2">Add to cart</button>
    <p class="js-added-2"></p>
    <p>12g:</p>
    <p class="js-alternating-message">App</p>
    <button class="js-stop-button">Stop</button>
    <p>12h:</p>
    <p class="js-alternating-message-2">App</p>
    <button class="js-add-message-button">Add</button>
    <button class="js-remove-message-button">Remove</button>
    <p>12i:</p>
    <p class="js-alternating-message-3">App</p>
    <button class="js-add-message-button-2">Add</button>
    <button class="js-remove-message-button-2">Remove</button>
    <script>
      //12a
      console.log("12a:");
      let add = function () {
        console.log(2 + 3);
      };
      add();
      add();

      //12b
      console.log("12b:");
      function runTwice(fun) {
        fun();
        fun();
      }

      runTwice(function () {
        console.log("12b");
      });
      runTwice(add);

      //12c:
      //create element to effect start button
      const startButtonElement = document.querySelector(".js-start-button");

      startButtonElement.addEventListener("click", () => {
        setTimeout(() => {
          startButtonElement.innerHTML = "Finished!";
        }, 1000);
      });

      //12d
      const loadingButtonElement = document.querySelector(".js-loading-button");

      loadingButtonElement.addEventListener("click", () => {
        loadingButtonElement.innerHTML = "Loading...";
        setTimeout(() => {
          loadingButtonElement.innerHTML = "Finished!";
        }, 1000);
      });

      //12e
      const addButtonElement = document.querySelector(".js-add-button");
      const addedElement = document.querySelector(".js-added");

      addButtonElement.addEventListener("click", () => {
        addedElement.innerHTML = "Added";
        setTimeout(() => {
          addedElement.innerHTML = "";
        }, 2000);
      });

      //12f
      const addButtonElement2 = document.querySelector(".js-add-button-2");
      const addedElement2 = document.querySelector(".js-added-2");

      let timeoutID;

      addButtonElement2.addEventListener("click", () => {
        addedElement2.innerHTML = "Added";
        clearTimeout(timeoutID);
        timeoutID = setTimeout(() => {
          addedElement2.innerHTML = "";
        }, 2000);
      });

      //12g

      // my first thought which was very inefficient
      // stopMessage = setInterval(function () {
      //   document.querySelector(".js-alternating-message").innerHTML =
      //     "(2) New Messages";
      //   //document.title = "App";
      //   setTimeout(function () {
      //     //document.title = "(2) New Messages";
      //     document.querySelector(".js-alternating-message").innerHTML = "App";
      //   }, 1000);
      // }, 2000);

      let stopMessage;
      stopMessage = setInterval(() => {
        let textElement = document.querySelector(".js-alternating-message");
        if (textElement.innerHTML === "App") {
          textElement.innerHTML = `(2) New Messages`;
        } else {
          textElement.innerHTML = "App";
        }
      }, 1000);

      document
        .querySelector(".js-stop-button")
        .addEventListener("click", () => {
          clearInterval(stopMessage);
        });

      //12h
      let messages1 = 0;
      document
        .querySelector(".js-add-message-button")
        .addEventListener("click", () => {
          messages1++;
        });

      document
        .querySelector(".js-remove-message-button")
        .addEventListener("click", () => {
          messages1--;
        });

      setInterval(() => {
        let textElement = document.querySelector(".js-alternating-message-2");
        if (textElement.innerHTML === "App") {
          textElement.innerHTML = `(${messages1}) New Messages`;
        } else {
          textElement.innerHTML = "App";
        }
      }, 1000);

      //12i
      let messages2 = 0;

      document
        .querySelector(".js-add-message-button-2")
        .addEventListener("click", () => {
          messages2++;
        });

      document
        .querySelector(".js-remove-message-button-2")
        .addEventListener("click", () => {
          if (messages2 > 0) {
            messages2--;
          }
        });

      setInterval(() => {
        let textElement = document.querySelector(".js-alternating-message-3");
        if (textElement.innerHTML === "App" && messages2 > 0) {
          textElement.innerHTML = `(${messages2}) New Messages`;
        } else {
          textElement.innerHTML = "App";
        }
      }, 1000);

      //12j
      console.log("12j:");
      const multiply = (num1, num2) => {
        return num1 * num2;
      };
      console.log(multiply(2, 3));
      console.log(multiply(7, 10));

      //12k
      const multiplyOneLine = (num1, num2) => num1 * num2;

      //12l
      console.log("12l:");
      function countPositive(nums) {
        let count = 0;
        nums.forEach((value) => {
          if (value > 0) {
            count++;
          }
        });
        return count;
      }

      console.log(countPositive([1, -3, 5]));
      console.log(countPositive([-2, 3, -5, 7, 10]));

      //12m
      console.log("12m:");
      function addNum(array, num) {
        console.log(array.map((value) => num + value));
      }

      addNum([1, 2, 3], 2);
      addNum([-2, -1, 0, 99], 2);

      //12n:
      console.log("12n:");
      function removeEgg(foods) {
        console.log(
          foods.filter((value) => {
            return value !== "egg";
          })
        );
      }
      removeEgg(["egg", "apple", "egg", "egg", "ham"]);

      //12o:
      console.log("12o:");
      function removeEgg2(foods) {
        let count = 0;
        console.log(
          foods.filter((value) => {
            if (value === "egg") {
              count++;
            }
            return value !== "egg" || count > 2;
          })
        );
      }
      removeEgg2(["egg", "apple", "egg", "egg", "ham"]);

      //12p
      //redoing 12c-i to use arrow functions
      //replaced "function ()" with "() =>"

      //12q
      //replace onclick="..." to .addEventListener('click',...)
    </script>
  </body>
</html>
